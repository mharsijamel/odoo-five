<?xml version="1.0"?>
<odoo>
    <record id="view_order_form_inherited" model="ir.ui.view">
        <field name="name">sale.order.form.inherit</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_order_form"/>
        <field name="arch" type="xml">
            <xpath  expr="//div[@class='oe_title']/h1"  position="after">
                <field name="opportunity_id" invisible="1"/>
                <label for="installation_type"/>
                <h2><field name="installation_type" attrs="{'readonly': [('opportunity_id', '!=', False)]}"/></h2>
                <label for="installation_state"/>
                <h2><field name="installation_state"  force_save="1" attrs="{'readonly': [('opportunity_id', '!=', False)]}"/></h2>
                <label for="opportunity_id"/>
                <h2><field name="opportunity_id" readonly="1"/></h2>
            </xpath>
            <xpath  expr="//group[@name='partner_details']"  position="inside">
                    <field name="counter_id" widget="selection"/>
            </xpath>
            <xpath  expr="//notebook"  position="inside">
                <page string="Customer Contract" name="customer_contract">
                    <div class="row" attrs="{'invisible': [('opportunity_id', '=', False)]}">
                        <div class="col-12" >
                            <label for="attachment_contract"/>
                            <field name="attachment_contract" filename="attachment_contract_fname"/>
                            <field name="attachment_contract_fname" invisible="1"/>
                        </div>
                        <div class="col-12 mt-5">
                            <label for="contract_signed"/>
                            <field name="contract_signed" invisible="0"/>
                        </div>
                    </div>
                    <div class="row" attrs="{'invisible': [('opportunity_id', '!=', False)]}">
                        <div class="col-12" >
                            <label for="attachment_contract_id"/>
                            <field name="attachment_contract_id" readonly="0" filename="attachment_contract_id_fname"/>
                            <field name="attachment_contract_id_fname" invisible="1"/>
                        </div>
                        <div class="col-12 mt-5">
                            <label for="contract_id_signed"/>
                            <field name="contract_id_signed" invisible="0"/>
                        </div>
                    </div>
                </page>
                <page string="Commercial file" name="commercial_files" attrs="{'invisible': [('contract_signed', '!=', True)]}">
                    <div class="row">
                        <div class="col-3">
                            <label for="filing_date"/>
                            <field name="filing_date"/>
                        </div>
                        <div name="poip_details" class="col-3">
                            <label for="poip_fees"/>
                            <field name="poip_fees"/>
                        </div>
                        <div name="steg_details" class="col-3">
                            <label for="steg_credit"/>
                            <field name="steg_credit"/>
                        </div>
                        <div name="anme_details" class="col-3">
                            <label for="sub_anme"/>
                            <field name="sub_anme"/>
                        </div>
                        <div class="col-3">
                            <label for="approbation_date"/>
                            <field name="approbation_date"/>
                        </div>
                        <div class="col-12">
                            <label for="poip_attachement"/>
                            <field name="poip_attachement" filename="poip_attachement_fname" attrs="{'readonly': [('approbation_date', '!=', False)]}"/>
                            <field name="poip_attachement_fname" invisible="1"/>
                        </div>
                        <div class="col-12">
                            <label for="discharge_attachement"/>
                            <field name="discharge_attachement" filename="discharge_attachement_fname" attrs="{'readonly': [('approbation_date', '!=', False)]}"/>
                            <field name="discharge_attachement_fname" invisible="1"/>
                        </div>
                    </div>

                </page>
                <page string="Technical file" name="technical_files" attrs="{'invisible': [('contract_signed', '!=', True)]}">
                    <div class="row">
                        <div class="col-4">
                            <label for="lead_reception_date"/>
                            <field name="lead_reception_date"/>
                        </div>
                        <div class="col-4">
                            <label for="lead_preparation_date"/>
                            <field name="lead_preparation_date"/>
                        </div>
                        <div class="col-4">
                            <label for="lead_filling_date"/>
                            <field name="lead_filling_date"/>
                        </div>
                        <div class="col-4">
                            <label for="lead_approbation_date"/>
                            <field name="lead_approbation_date"/>
                        </div>
                    </div>

                </page>
                <page string="Payment Information" name="payment_information" attrs="{'invisible': [('contract_signed', '!=', True)]}">
                    <div class="row">
                        <div class="col-6">
                            <label for="payment_type"/>
                            <field name="payment_type"/>
                        </div>
                        <div class="col-6">
                            <label for="advance_amount"/>
                            <field name="advance_amount" attrs="{'invisible': [('payment_type', '!=', 'with_advance')], 'required': [('payment_type', '=', 'with_advance')]}"/>
                        </div>
                    </div>

                </page>
            </xpath>

        </field>
    </record>

</odoo>
